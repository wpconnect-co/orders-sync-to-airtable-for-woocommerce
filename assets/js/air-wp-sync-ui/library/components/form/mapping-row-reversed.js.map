{"version":3,"file":"mapping-row-reversed.js","sources":["../../../src/components/form/mapping-row-reversed/MappingRowReversed.tsx"],"sourcesContent":["import React from \"react\";\nimport {MappingRowReversedProps} from \"./MappingRowReversed.types\";\nimport {MappingOption, FormOptionsValues} from \"../../../models/mapping/Mapping.types\";\nimport Select from \"../select/Select\";\nimport { SelectOption, GroupOption } from \"../select/Select.types\";\nimport \"./MappingRowReversed.css\";\nimport {CircleTrash, Grab} from \"../../graphics\";\nimport Input from \"../input/Input\";\nimport FormRow from \"../form-row/FormRow\";\n\n/**\n * MappingRowReversed <br />\n * Manage mapping from WordPress fields to Airtable ones <br />\n * Use a template to auto Airtable field option\n *\n * @param {MappingRowReversedTexts} texts Texts\n * @param {number} index Row index.\n * @param {string} airtableFieldId Airtable field id\n * @param {string} wordPressFieldId WordPress field id\n * @param {FieldOptions} fieldOptions Field's options\n * @param {React.ReactNode} error Error\n * @param {MappingManagerReversed} mappingManager Mapping manager\n * @param {string} className Class name\n * @param {object} ...props Other props for <tr> HTML element.\n * @constructor\n */\nexport default function MappingRowReversed({ texts, index, airtableFieldId, wordPressFieldId, fieldOptions, error, mappingManager, className = '', ...props }:MappingRowReversedProps) {\n\n\tconst airtableFieldDisabled = Object.keys(mappingManager.airtableSelectFieldGroupsOptions).length === 0; // || loadingDatabasesAndPages;\n\tlet wordPressFieldConfig = {} as MappingOption;\n\tif (wordPressFieldId) {\n\t\twordPressFieldConfig = mappingManager.getWordPressFieldById(wordPressFieldId) ?? {};\n\t}\n\tconst airtableFieldChangedHandler = (newValue:{ value: string, label: string }) => {\n\t\tmappingManager.updateAirtableField(index, newValue ? newValue.value : '')\n\t};\n\n\tconst wordPressFieldChangedHandler = (newValue:{ value: string, label: string }) => {\n\t\tmappingManager.updateWordPressField(index, newValue ? newValue.value : '');\n\t};\n\n\tconst customFieldOptionChangedHandler = (e: React.FormEvent<HTMLInputElement>) => {\n\t\tconst target = e?.target as HTMLInputElement;\n\t\tmappingManager.updateFieldOption(index, 'name', target.value);\n\t};\n\n\tconst fieldFormOptionChangedHandler = (formOptionsValues:FormOptionsValues, fieldType:string, fieldName:string) => (e:React.ChangeEvent<HTMLInputElement>) => {\n\t\tlet value:string|number = e.target.value;\n\t\tif ('checkbox' === fieldType) {\n\t\t\tvalue = e.target.checked ? 1 : 0;\n\t\t}\n\t\tmappingManager.updateFieldOption(index, 'form_options_values', {\n\t\t\t...formOptionsValues,\n\t\t\t[fieldName]: value\n\t\t});\n\t};\n\n\tconst removeMappingRowHandler = () => {\n\t\tmappingManager.removeMappingRow(index)\n\t};\n\n\tlet selectedWordPressOption:string|SelectOption = '';\n\tconst wordPressOptions = Object.keys(mappingManager.wordPressSelectFieldsOptions).map((groupKey) => {\n\t\tconst group = mappingManager.wordPressSelectFieldsOptions[groupKey];\n\t\treturn {\n\t\t\tlabel: group.label,\n\t\t\toptions: group.options.map(({ value, label, enabled }) => {\n\t\t\t\tconst option:SelectOption = { value, label, isDisabled: !enabled };\n\t\t\t\tif (wordPressFieldId === option.value) {\n\t\t\t\t\tselectedWordPressOption = option;\n\t\t\t\t}\n\t\t\t\treturn option;\n\t\t\t})\n\t\t} as GroupOption;\n\t});\n\n\tlet selectedAirtableField:string|SelectOption = '';\n\tconst airtableOptions = Object.keys(mappingManager.airtableSelectFieldGroupsOptions[index]).map((groupKey) => {\n\t\tconst group = mappingManager.airtableSelectFieldGroupsOptions[index][groupKey];\n\t\tconst groupLabel = group.label ?? texts.fields;\n\t\treturn {\n\t\t\tlabel: groupLabel,\n\t\t\toptions: group.options.map((field) => {\n\t\t\t\tconst option = { value: field.id, label: field.name, isDisabled: 'enabled' in field && !field.enabled } as SelectOption;\n\t\t\t\tif (option.value === airtableFieldId) {\n\t\t\t\t\tselectedAirtableField = option\n\t\t\t\t}\n\t\t\t\treturn option;\n\t\t\t})\n\t\t} as GroupOption;\n\t})\n\n\tconst renderCustomFieldOptions = () => {\n\t\treturn <FormRow className=\"airwpsync-c-mapping-row-reversed__custom-field\">\n\t\t\t<Input\n\t\t\t\tlabel={ texts.custom_field }\n\t\t\t\tlabelHidden={ true }\n\t\t\t\tplaceholder={ texts.custom_field }\n\t\t\t\tvalue={ fieldOptions.name ?? '' }\n\t\t\t\tonChange={ customFieldOptionChangedHandler }\n\t\t\t/>\n\t\t</FormRow>;\n\t};\n\n\tconst renderFieldFormOptions = () => {\n\t\tif (!wordPressFieldConfig.form_options) {\n\t\t\treturn null;\n\t\t}\n\t\treturn wordPressFieldConfig.form_options.map(function (formOption) {\n\t\t\tconst form_option_id = `field_form_option_` + airtableFieldId + '_' + formOption.name;\n\t\t\tconst value = fieldOptions.form_options_values && fieldOptions.form_options_values[formOption.name] ? fieldOptions.form_options_values[formOption.name] : '';\n\t\t\tconst inputAttributes = {\n\t\t\t\tid: form_option_id,\n\t\t\t\tvalue,\n\t\t\t\ttype: formOption.type,\n\t\t\t\tname: form_option_id,\n\t\t\t\tclassName: 'regular-text ltr',\n\t\t\t\tonChange: fieldFormOptionChangedHandler(fieldOptions.form_options_values || {} as FormOptionsValues, formOption.type, formOption.name),\n\t\t\t};\n\t\t\treturn <div key={form_option_id} className=\"notionwpsync-field\">\n\t\t\t\t<label htmlFor={form_option_id}>\n\t\t\t\t\t{\n\t\t\t\t\t\tformOption.type === 'checkbox' ?\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t{...inputAttributes}\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\t\tclassName: '',\n\t\t\t\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\t\t\t\t\t\t\twidth: '1em',\n\t\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle',\n\t\t\t\t\t\t\t\t\t\t\tmarginRight: '0.5em',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchecked: !!value\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<span>{formOption.label}</span>\n\t\t\t\t</label>\n\t\t\t\t{\n\t\t\t\t\tformOption.type !== 'checkbox' ?\n\t\t\t\t\t\t<input {...inputAttributes} />\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t</div>;\n\t\t})\n\t}\n\n\treturn <tr className={`airwpsync-c-mapping-row-reversed ${className}`} {...props}>\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__wordpress-field-col\">\n\t\t\t<div className=\"airwpsync-c-mapping-row-reversed__wordpress-field\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"airwpsync-c-mapping-row-reversed__btn-sort airwpsync-u-reset-btn\"\n\t\t\t\t>\n\t\t\t\t\t<span className=\"screen-reader-text\">{texts.sort}</span>\n\t\t\t\t\t<Grab/>\n\t\t\t\t</div>\n\t\t\t\t<Select\n\t\t\t\t\tlabel={texts.wordpress_field_placeholder}\n\t\t\t\t\tlabelHidden={true}\n\t\t\t\t\tvalue={selectedWordPressOption}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tonChange={wordPressFieldChangedHandler}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\toptions={wordPressOptions}\n\t\t\t\t\tplaceholder={texts.wordpress_field_placeholder}\n\t\t\t\t/>\n\t\t\t\t{wordPressFieldConfig.notice ? <small>{wordPressFieldConfig.notice}</small> : null}\n\t\t\t\t{wordPressFieldId && wordPressFieldId.split('::')[1] === 'custom_field' ? renderCustomFieldOptions() : null}\n\t\t\t\t{wordPressFieldConfig.form_options ? renderFieldFormOptions() : null}\n\t\t\t</div>\n\t\t</td>\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__assigned-to\">\n\t\t\t{texts.assigned_to}\n\t\t</td>\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__airtable-field-col\">\n\t\t\t{ /* @TODO: check airtableFieldDisabled */ }\n\t\t\t<Select\n\t\t\t\tlabel={''}\n\t\t\t\tvalue={ selectedAirtableField }\n\t\t\t\t// @ts-ignore\n\t\t\t\tonChange={ airtableFieldChangedHandler }\n\t\t\t\t// @ts-ignore\n\t\t\t\toptions={ airtableOptions }\n\t\t\t\t/>\n\t\t\t{error ? <div className=\"airwpsync-c-mapping-row-reversed__error\">{ error }</div> : null }\n\t\t</td>\n\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__flex\">\n\n\t\t\t<button\n\t\t\t\tclassName=\"airwpsync-c-mapping-row-reversed__remove-btn airwpsync-u-reset-btn\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={removeMappingRowHandler}\n\t\t\t>\n\t\t\t\t<span className=\"screen-reader-text\">{texts.remove}</span>\n\t\t\t\t<CircleTrash />\n\t\t\t</button>\n\t\t</td>\n\t</tr>;\n}\n"],"names":["_jsx","_jsxs","Grab","CircleTrash"],"mappings":"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"}